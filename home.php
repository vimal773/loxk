<?php
session_start();

// Auto-logout after 5 minutes (300 seconds)
$timeout = 300;

if (!isset($_SESSION["loggedin"]) || $_SESSION["loggedin"] !== true) {
    header("Location: index.php");
    exit();
}

// Check if last activity is set
if (isset($_SESSION['last_activity']) && (time() - $_SESSION['last_activity']) > $timeout) {
    session_unset();
    session_destroy();
    header("Location: logout.php");
    exit();
}

// Update last activity time stamp
$_SESSION['last_activity'] = time();
?>
<!DOCTYPE html> <html lang="en"> <head> <meta charset="UTF-8" /> <meta name="viewport" content="width=device-width, initial-scale=1.0" /> <title>CipherLock</title> <link rel="icon" href="https://uploads.onecompiler.io/43btugq7w/43nr9t7vy/Screenshot%202025-06-24%20173628-Photoroom.png" type="image/png"> <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet"> <style> * { box-sizing: border-box; margin: 0; padding: 0; } body { background-color: #0f172a; color: #e2e8f0; font-family: 'Inter', sans-serif; display: flex; flex-direction: column; align-items: center; justify-content: center; min-height: 100vh; padding: 20px; } .logo { display: flex; align-items: center; margin-bottom: 10px; } .logo-icon { font-size: 2rem; margin-right: 10px; color: #10b981; } h1 { font-size: 2rem; font-weight: 700; color: #ffffff; } p.subtitle { margin-bottom: 30px; color: #94a3b8; text-align: center; } .tabs { display: flex; border-radius: 8px; overflow: hidden; margin-bottom: 20px; background-color: #1e293b; width: 100%; max-width: 480px; } .tab { flex: 1; text-align: center; padding: 10px 0; cursor: pointer; font-weight: 600; color: #cbd5e1; transition: all 0.3s ease; } .tab.active { background-color: #334155; color: #ffffff; } .card { background-color: #1e293b; padding: 24px; border-radius: 12px; width: 100%; max-width: 480px; box-shadow: 0 0 0 1px #334155; } .card h2 { margin-bottom: 8px; font-size: 1.25rem; font-weight: 700; color: #ffffff; } .card p.desc { font-size: 0.95rem; margin-bottom: 18px; color: #94a3b8; } label { display: block; margin-bottom: 6px; font-weight: 600; color: #cbd5e1; } textarea, input { width: 100%; padding: 12px; background-color: #0f172a; border: 1px solid #334155; border-radius: 8px; color: #f8fafc; font-size: 1rem; margin-bottom: 18px; resize: vertical; } input::placeholder, textarea::placeholder { color: #64748b; } button { width: 100%; padding: 14px; background-color: #10b981; border: none; border-radius: 8px; font-size: 1rem; font-weight: 600; color: #0f172a; cursor: pointer; transition: background 0.3s ease; display: flex; align-items: center; justify-content: center; gap: 8px; } button:hover { background-color: #0ea77d; } .icon-lock { font-size: 1.2rem; } .output, .message { margin-top: 16px; font-size: 0.95rem; word-wrap: break-word; white-space: pre-wrap; } .error { color: #f87171; } .copy-btn { margin-top: 10px; font-size: 0.9rem; background-color: #334155; color: #f8fafc; padding: 8px 12px; border: none; border-radius: 6px; cursor: pointer; display: none; } .copy-btn:hover { background-color: #475569; } .watermark { margin-top: 30px; font-size: 0.9rem; color: #64748b; text-align: center; user-select: none; font-weight: 500; } .watermark a { color: #10b981; text-decoration: none; font-weight: 700; transition: color 0.3s ease; } .watermark a:hover { color: #0ea77d; text-decoration: underline; } @media (max-width: 480px) { h1 { font-size: 1.5rem; } .tab { font-size: 0.9rem; } .card h2 { font-size: 1.1rem; } .card p.desc { font-size: 0.85rem; } textarea, input { font-size: 0.95rem; } } </style> </head> <body> <div class="logo"> <div class="logo-icon"> <img src="https://uploads.onecompiler.io/43btugq7w/43nr9t7vy/Screenshot%202025-06-24%20173628-Photoroom.png" alt="Logo" width="50" height="50" /> </div> <h1>CipherLock</h1> </div> <p class="subtitle">Secure your text with password-based AI encryption.</p> <div class="tabs"> <div class="tab active" onclick="switchTab('encrypt')">Encrypt</div> <div class="tab" onclick="switchTab('decrypt')">Decrypt</div> </div> <div class="card" id="encrypt-section"> <h2>Encrypt Text</h2> <p class="desc">Enter your text and a password to generate a secure emoji sequence.</p> <label for="plain-text">Your Text</label> <textarea id="plain-text" placeholder="Type your secret message here..."></textarea> <label for="encrypt-password">Password</label> <input type="password" id="encrypt-password" placeholder="Enter a strong password" /> <button onclick="encrypt()">🔒 Encrypt Now</button> <div class="output" id="encrypted-output"></div> <button class="copy-btn" id="copy-encrypted" onclick="copyText('encrypted-output')">Copy Encrypted Text</button> <div class="message" id="encrypt-message"></div> </div> <div class="card" id="decrypt-section" style="display:none"> <h2>Decrypt Text</h2> <p class="desc">Paste the encrypted string and enter the password to view original message.</p> <label for="encrypted-text">Encrypted String</label> <textarea id="encrypted-text" placeholder="Paste the encrypted numbers here..."></textarea> <label for="decrypt-password">Password</label> <input type="password" id="decrypt-password" placeholder="Enter password" /> <button onclick="decrypt()">🔓 Decrypt Now</button> <div class="output" id="decrypted-output"></div> <button class="copy-btn" id="copy-decrypted" onclick="copyText('decrypted-output')">Copy Decrypted Text</button> <div class="message" id="decrypt-message"></div> </div> <div class="watermark"> This tool made by <a href="https://blackjam.example.com" target="_blank" rel="noopener noreferrer">BlackJam</a> </div> <script> const MAGIC = "SECURE"; function switchTab(tab) { document.querySelectorAll('.tab').forEach(el => el.classList.remove('active')); document.querySelectorAll('.card').forEach(el => el.style.display = 'none'); if (tab === 'encrypt') { document.querySelector('.tab:nth-child(1)').classList.add('active'); document.getElementById('encrypt-section').style.display = 'block'; } else { document.querySelector('.tab:nth-child(2)').classList.add('active'); document.getElementById('decrypt-section').style.display = 'block'; } } function encrypt() { const text = document.getElementById('plain-text').value.trim(); const password = document.getElementById('encrypt-password').value; const msgDiv = document.getElementById('encrypt-message'); const outDiv = document.getElementById('encrypted-output'); const copyBtn = document.getElementById('copy-encrypted'); if (!text || !password) { msgDiv.textContent = '⚠️ Please enter both text and password'; msgDiv.className = 'message error'; return; } const pwd = Array.from(password).map(c => c.charCodeAt(0)); const combined = MAGIC + text; const encrypted = Array.from(combined).map((c, i) => c.charCodeAt(0) + pwd[i % pwd.length]).join('-'); outDiv.textContent = encrypted; msgDiv.textContent = '✅ Encrypted successfully'; msgDiv.className = 'message'; copyBtn.style.display = 'inline-block'; } function decrypt() { const input = document.getElementById('encrypted-text').value.trim(); const password = document.getElementById('decrypt-password').value; const msgDiv = document.getElementById('decrypt-message'); const outDiv = document.getElementById('decrypted-output'); const copyBtn = document.getElementById('copy-decrypted'); if (!input || !password) { msgDiv.textContent = '⚠️ Please enter both encrypted text and password'; msgDiv.className = 'message error'; return; } const nums = input.split('-').map(n => parseInt(n)); const pwd = Array.from(password).map(c => c.charCodeAt(0)); let prefix = ""; for (let i = 0; i < MAGIC.length; i++) { const code = nums[i] - pwd[i % pwd.length]; prefix += String.fromCharCode(code); } if (prefix !== MAGIC) { msgDiv.textContent = '❌ Incorrect password or corrupted input'; msgDiv.className = 'message error'; return; } let decrypted = ""; for (let i = MAGIC.length; i < nums.length; i++) { decrypted += String.fromCharCode(nums[i] - pwd[i % pwd.length]); } outDiv.textContent = decrypted; msgDiv.textContent = '✅ Decrypted successfully'; msgDiv.className = 'message'; copyBtn.style.display = 'inline-block'; } function copyText(id) { const el = document.getElementById(id); const text = el.textContent; if (!text) return; navigator.clipboard.writeText(text).then(() => { alert('Copied to clipboard!'); }); } </script> </body> </html>
